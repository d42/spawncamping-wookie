{% extends 'base.html' %}
{% block main_body %}


<script>
selected_properties = [];

propertySelection = function(property) {
    if (!property.checked) {
        var index = selected_properties.indexOf(property);
        selected_properties.splice(index, 1);
        return;
    }

    if (selected_properties.length >= 2) {
     var old_prop = selected_properties.shift();
     old_prop.checked = false;
    }
    selected_properties.push(property);
}

showValue = function(value) {
    var label = document.getElementById('range_label');
    label.innerHTML = ['1 Day', '12 Hours', '1 Hour', '30 Minutes', '15 Minutes'][value];
};

validateSubmit = function() {
    if(selected_properties.length != 2) {
        alert("You have to compare two properties, that's how it goes.");
        return false;
    }
    return true;
}
</script>



{% if collections %}
<form action="{{url_for('graph')}}" method='POST' onsubmit='validateSubmit()'>
<table class="table">
<thead>
    <tr>
        {% for (name, span) in headers %}
        <th colspan="{{span}}">{{name}}</th>
        {% endfor %}
    </tr>
</thead>
<tr>
    {% for c in collections %}
    <th>{{c}}</th>
    {% endfor %}

</tr>
{% for row in rows %}
<tr>
    {% for column in row %}
    <td>
        <label> <input type="checkbox" name="property_{{column|join('.')}}" onchange="propertySelection(this)"/>{{column|last}}</label>
    </td>
    {% endfor %}
</tr>
{% endfor %}
<table>


<div class='row'>
    <div class="col-xs-6 col-lg-4">
        <span>
            <label for="range_slider">Resolution</label>
            <input id="range_slider" name="resolution" type="range" min="0" max="4" value="0" step="1" oninput="showValue(this.value)"/>
            <label id="range_label" for="range_slider">1 Day</label>
        </span>
    </div>

    <div class="col-xs-6 col-lg-4">
        <p>Missing Values </p>
        <span>
        <label> Ignore <input type="radio" name="missingvalues" value="ignore" /></label>
        <label> Mean<input type="radio" name="missingvalues" value="mean" /></label>
        <label> 0 <input type="radio" name="missingvalues" value="0" /></label>
        </span>
    </div>
</div>
<input type="submit" value="Go!" class="btn btn-primary btn-lg"/>
</form>

{% endif %}
{% endblock %}
